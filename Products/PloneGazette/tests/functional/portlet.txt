Log in as the portal owner::

    >>> from plone.app.testing import TEST_USER_NAME, TEST_USER_PASSWORD
    >>> browser.login(TEST_USER_NAME, TEST_USER_PASSWORD)

Go to add portlet.SubscribeNewsletter::

    >>> browser.open('@@manage-portlets')

    >>> 'Our newsletter' in browser.contents
    False

    >>> browser.open('/++contextportlets++plone.leftcolumn/+/portlets.SubscribeNewsletter')

    >>> browser.getControl(name="form.actions.save").click()

    >>> 'Our newsletter' in browser.contents
    True

The portlet should not be available::

    >>> browser.open(portal_url)
    >>> 'Our newsletter' in browser.contents
    False

Add NewsletterTheme to make the portlet available::

    >>> browser.open('/createObject?type_name=NewsletterTheme')
    >>> browser.getControl(name="title").value = 'NewsletterTheme01'
    >>> browser.getControl(name="default_format").value = ['Text']
    >>> browser.getControl(name="testEmail").value = 'test@test.mail'
    >>> browser.getControl(name="authorEmail").value = 'author@test.mail'
    >>> browser.getControl(name="form.button.Save").click()

    >>> 'Our newsletter' in browser.contents
    True
